{"timestamp":"2026-01-03T12:08:51.261Z","eval_id":"route-to-listening","dataset":"dataset-routing","score":1,"hits":["Correctly selected 'three_levels_listening' with high confidence","Rationale references 'complex grievances', 'venting', and 'need for understanding'","Thorough client statement analysis with relevant primary indicators","Alternative framework was considered and dismissed with justification"],"misses":[],"candidate_answer":"```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is expressing frustration and venting about an imbalance in household responsibilities and lack of support from her husband. She is articulating complex grievances and underlying feelings of anger and being overwhelmed. The primary goal in this context is to deeply understand her narrative, emotions, and relational process rather than immediately shifting focus to resources or strengths.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Venting about multiple responsibilities ('I have to go to work every day, take care of the kids, do the housework, and cook')\",\n      \"Expressing complex grievances about her husband's behavior ('He only knows how to hold his phone and play games')\",\n      \"Communicating emotional distress ('It really makes me angry')\"\n    ],\n    \"contraindications\": [\n      \"No overt expression of self-blame or hopelessness\",\n      \"Does not reference feeling 'stuck' or acknowledgment of any hidden strengths\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"resource_focused_encouragement\",\n        \"score\": 0.3,\n        \"reason_not_selected\": \"While the client's statement involves challenges, it lacks explicit self-blame, hopelessness, or direct references to inner resources or perseverance. The content and tone are more consistent with venting and seeking to be heard than with requesting encouragement or reframing.\"\n      }\n    ]\n  }\n}\n```","target":"default","reasoning":"json_schema_validator: Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata | content_evaluator: The candidate matches the reference in framework selection, rationale, and analysis, and explicitly covers all necessary decision logic per instructions.","lm_provider_request":{"question":"Route the following client statement to the best framework (Listening vs. Encouragement).\n\nClient Statement:\n\"I have to go to work every day, take care of the kids, do the housework, and cook. What about my husband? He only knows how to hold his phone and play games. Sometimes when I ask him to help get something, he moves so slowly. It really makes me angry.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>","guidelines":""},"evaluator_results":[{"name":"json_schema_validator","type":"code_judge","score":1,"weight":1,"verdict":"pass","hits":[],"misses":[],"reasoning":"Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata","evaluator_provider_request":{"script":["uv","run","validate_output.py"],"cwd":"/root/projects/agentv/examples/showcase/psychotherapy/evals"}},{"name":"content_evaluator","type":"llm_judge","score":1,"weight":1,"verdict":"pass","hits":["Correctly selected 'three_levels_listening' with high confidence","Rationale references 'complex grievances', 'venting', and 'need for understanding'","Thorough client statement analysis with relevant primary indicators","Alternative framework was considered and dismissed with justification"],"misses":[],"reasoning":"The candidate matches the reference in framework selection, rationale, and analysis, and explicitly covers all necessary decision logic per instructions.","evaluator_provider_request":{"user_prompt":"You are an expert evaluator. Your goal is to grade the candidate_answer based on how well it achieves the criteria for the original task.\n\nUse the reference_answer as a gold standard for a high-quality response (if provided). The reference_answer may be a simple text response, or it may contain a sequence of expected agent messages including tool calls. When it contains multiple messages, the last message represents the final expected answer. The candidate_answer does not need to match it verbatim, but should capture the key points and follow the same spirit.\n\nBe concise and focused in your evaluation. Provide succinct, specific feedback rather than verbose explanations.\n\n[[ ## criteria ## ]]\nMust select 'three_levels_listening'.\nRationale should mention \"complex grievance\", \"venting\", or \"need for understanding\".\n\n[[ ## question ## ]]\nRoute the following client statement to the best framework (Listening vs. Encouragement).\n\nClient Statement:\n\"I have to go to work every day, take care of the kids, do the housework, and cook. What about my husband? He only knows how to hold his phone and play games. Sometimes when I ask him to help get something, he moves so slowly. It really makes me angry.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>\n\n[[ ## reference_answer ## ]]\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is expressing deep grievance, anger, and confusion about a relationship dynamic. They need to feel heard and have the dynamic ('Pursuer-Distancer') analyzed before moving to solutions.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Expressing complex grievance about household responsibilities\",\n      \"Venting frustration about relationship dynamic\",\n      \"Describing pursuer-distancer pattern\"\n    ],\n    \"contraindications\": [],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"resource_focused_encouragement\",\n        \"score\": 0.3,\n        \"reason_not_selected\": \"Client needs understanding and validation of the dynamic first, not reframing\"\n      }\n    ]\n  }\n}\n\n[[ ## candidate_answer ## ]]\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is expressing frustration and venting about an imbalance in household responsibilities and lack of support from her husband. She is articulating complex grievances and underlying feelings of anger and being overwhelmed. The primary goal in this context is to deeply understand her narrative, emotions, and relational process rather than immediately shifting focus to resources or strengths.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Venting about multiple responsibilities ('I have to go to work every day, take care of the kids, do the housework, and cook')\",\n      \"Expressing complex grievances about her husband's behavior ('He only knows how to hold his phone and play games')\",\n      \"Communicating emotional distress ('It really makes me angry')\"\n    ],\n    \"contraindications\": [\n      \"No overt expression of self-blame or hopelessness\",\n      \"Does not reference feeling 'stuck' or acknowledgment of any hidden strengths\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"resource_focused_encouragement\",\n        \"score\": 0.3,\n        \"reason_not_selected\": \"While the client's statement involves challenges, it lacks explicit self-blame, hopelessness, or direct references to inner resources or perseverance. The content and tone are more consistent with venting and seeking to be heard than with requesting encouragement or reframing.\"\n      }\n    ]\n  }\n}\n```","system_prompt":"You must respond with a single JSON object matching this schema:\n\n{\n  \"score\": <number between 0.0 and 1.0>,\n  \"hits\": [<array of strings, max 4 items, brief specific achievements>],\n  \"misses\": [<array of strings, max 4 items, brief specific failures or omissions, empty if none>],\n  \"reasoning\": \"<string, concise explanation for the score, 1-2 sentences max>\"\n}","target":"default"}}],"trace_summary":{"event_count":0,"tool_names":[],"tool_calls_by_name":{},"error_count":0}}
{"timestamp":"2026-01-03T12:08:51.807Z","eval_id":"route-to-encouragement-father","dataset":"dataset-routing","score":1,"hits":["Correctly selected 'resource_focused_encouragement'","Rationale mentions reframing and validating restraint","Client statement analysis highlights self-blame and resourcefulness","Framework output validates restraint and reframes deficit"],"misses":[],"candidate_answer":"```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client expresses intense anger and a strong urge to act destructively but ultimately restrains themselves, highlighting both a moment of struggle and an underlying strength. Additionally, the client makes a self-blaming statement ('I feel like I raised this son for nothing'), which signals possible hopelessness and a deficit-based self-view. These patterns fit the criteria for resource-focused encouragement: reframing the experience to validate the client's restraint and resourcefulness, and shifting perspective from deficit to resource.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Intense emotional struggle: 'I was going to explode, I really wanted to hit him!'\",\n      \"Restraint in behavior: 'But... in the end, I didn't raise my hand.'\",\n      \"Self-blame/hopelessness: 'I feel like I raised this son for nothing.'\"\n    ],\n    \"contraindications\": [\n      \"Client does not explicitly request to be understood in depth nor present a complex, confusing narrative suggesting need for three_levels_listening.\",\n      \"No significant indicators of confusion or feeling misunderstood.\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {\n    \"validation\": \"It's clear you've been dealing with powerful feelings of anger and disappointment, and it took real strength to control your actions in that moment.\",\n    \"resource_reframe\": \"Even when emotions were overwhelming, you managed not to act in a way you would regret. That self-control is a significant personal resource.\",\n    \"encouragement_focus\": \"The fact that you chose restraint, despite everything you were feeling, shows that you care deeply about the kind of parent you want to be. Your ability to pause and make that choice is meaningful, even in difficult circumstances.\",\n    \"gentle_challenge\": \"While it may feel as though your efforts in parenting have gone unnoticed, your response here demonstrates a strong commitment to acting with integrity—even in moments of deep frustration.\"\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.6,\n        \"reason_not_selected\": \"Although the client expresses strong emotions, the primary need is for encouragement and reframing, not for in-depth exploration of narrative, emotional layers, or process dynamics.\"\n      }\n    ]\n  }\n}\n```","target":"default","reasoning":"json_schema_validator: Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata | content_evaluator: The candidate fully matches the expected outcome, using the resource-focused approach, directly referencing both the restraint and self-blame, and providing a nuanced, validating framework output.","lm_provider_request":{"question":"Route the following client statement to the best framework.\n\nClient Statement:\n\"I was going to explode, I really wanted to hit him! But... in the end, I didn't raise my hand. I feel like I raised this son for nothing.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>","guidelines":""},"evaluator_results":[{"name":"json_schema_validator","type":"code_judge","score":1,"weight":1,"verdict":"pass","hits":[],"misses":[],"reasoning":"Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata","evaluator_provider_request":{"script":["uv","run","validate_output.py"],"cwd":"/root/projects/agentv/examples/showcase/psychotherapy/evals"}},{"name":"content_evaluator","type":"llm_judge","score":1,"weight":1,"verdict":"pass","hits":["Correctly selected 'resource_focused_encouragement'","Rationale mentions reframing and validating restraint","Client statement analysis highlights self-blame and resourcefulness","Framework output validates restraint and reframes deficit"],"misses":[],"reasoning":"The candidate fully matches the expected outcome, using the resource-focused approach, directly referencing both the restraint and self-blame, and providing a nuanced, validating framework output.","evaluator_provider_request":{"user_prompt":"You are an expert evaluator. Your goal is to grade the candidate_answer based on how well it achieves the criteria for the original task.\n\nUse the reference_answer as a gold standard for a high-quality response (if provided). The reference_answer may be a simple text response, or it may contain a sequence of expected agent messages including tool calls. When it contains multiple messages, the last message represents the final expected answer. The candidate_answer does not need to match it verbatim, but should capture the key points and follow the same spirit.\n\nBe concise and focused in your evaluation. Provide succinct, specific feedback rather than verbose explanations.\n\n[[ ## criteria ## ]]\nMust select 'resource_focused_encouragement'.\nRationale should mention \"finding the resource\", \"reframing self-blame\", or \"validating restraint\".\n\n[[ ## question ## ]]\nRoute the following client statement to the best framework.\n\nClient Statement:\n\"I was going to explode, I really wanted to hit him! But... in the end, I didn't raise my hand. I feel like I raised this son for nothing.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>\n\n[[ ## reference_answer ## ]]\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is expressing hopelessness and self-blame ('raised for nothing'), but the narrative contains a hidden positive resource (self-control). The most effective intervention is to reframe this restraint as a success.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Self-blame ('raised this son for nothing')\",\n      \"Hidden resource (restraint from hitting)\",\n      \"Behavior they dislike but has positive protective intent\"\n    ],\n    \"contraindications\": [],\n    \"therapeutic_urgency\": \"elevated\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.4,\n        \"reason_not_selected\": \"Client needs immediate reframing of restraint as strength, not just understanding\"\n      }\n    ]\n  }\n}\n\n[[ ## candidate_answer ## ]]\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client expresses intense anger and a strong urge to act destructively but ultimately restrains themselves, highlighting both a moment of struggle and an underlying strength. Additionally, the client makes a self-blaming statement ('I feel like I raised this son for nothing'), which signals possible hopelessness and a deficit-based self-view. These patterns fit the criteria for resource-focused encouragement: reframing the experience to validate the client's restraint and resourcefulness, and shifting perspective from deficit to resource.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Intense emotional struggle: 'I was going to explode, I really wanted to hit him!'\",\n      \"Restraint in behavior: 'But... in the end, I didn't raise my hand.'\",\n      \"Self-blame/hopelessness: 'I feel like I raised this son for nothing.'\"\n    ],\n    \"contraindications\": [\n      \"Client does not explicitly request to be understood in depth nor present a complex, confusing narrative suggesting need for three_levels_listening.\",\n      \"No significant indicators of confusion or feeling misunderstood.\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {\n    \"validation\": \"It's clear you've been dealing with powerful feelings of anger and disappointment, and it took real strength to control your actions in that moment.\",\n    \"resource_reframe\": \"Even when emotions were overwhelming, you managed not to act in a way you would regret. That self-control is a significant personal resource.\",\n    \"encouragement_focus\": \"The fact that you chose restraint, despite everything you were feeling, shows that you care deeply about the kind of parent you want to be. Your ability to pause and make that choice is meaningful, even in difficult circumstances.\",\n    \"gentle_challenge\": \"While it may feel as though your efforts in parenting have gone unnoticed, your response here demonstrates a strong commitment to acting with integrity—even in moments of deep frustration.\"\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.6,\n        \"reason_not_selected\": \"Although the client expresses strong emotions, the primary need is for encouragement and reframing, not for in-depth exploration of narrative, emotional layers, or process dynamics.\"\n      }\n    ]\n  }\n}\n```","system_prompt":"You must respond with a single JSON object matching this schema:\n\n{\n  \"score\": <number between 0.0 and 1.0>,\n  \"hits\": [<array of strings, max 4 items, brief specific achievements>],\n  \"misses\": [<array of strings, max 4 items, brief specific failures or omissions, empty if none>],\n  \"reasoning\": \"<string, concise explanation for the score, 1-2 sentences max>\"\n}","target":"default"}}],"trace_summary":{"event_count":0,"tool_names":[],"tool_calls_by_name":{},"error_count":0}}
{"timestamp":"2026-01-03T12:08:52.765Z","eval_id":"route-to-encouragement-job","dataset":"dataset-routing","score":1,"hits":["Correctly selects resource_focused_encouragement as framework","Rationale addresses self-blame, hopelessness, and stuckness","Primary indicators accurately identified and matched to routing logic","Framework output provides normalization, empowerment, and strength-based reframing"],"misses":[],"candidate_answer":"```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client expresses self-blame ('I doubt myself—am I unable to do anything?'), hopelessness ('in pain, unhappy every day, and don't know what to do'), and a sense of 'stuckness' after sending many resumes with no response. These indicators match the routing logic for resource_focused_encouragement, which is aimed at validating stuckness, reframing the struggle, and identifying hidden strengths.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Self-blame: 'I doubt myself—am I unable to do anything?'\",\n      \"Hopelessness: 'I am in pain, unhappy every day'\",\n      \"Stuckness: 'don't know what to do', 'sent many resumes with no response'\"\n    ],\n    \"contraindications\": [\n      \"No explicit expression of confusion or complexity needing 'three_levels_listening'\",\n      \"No statements of feeling unheard or misunderstood\"\n    ],\n    \"therapeutic_urgency\": \"elevated\"\n  },\n  \"framework_output\": {\n    \"validation\": \"It's genuinely difficult to put effort into job searching and receive no response. Many people in your position would feel discouraged or doubt themselves—these feelings make sense in this context.\",\n    \"reframing\": \"Your continued efforts in sending out resumes show persistence and resilience, even while you're feeling unhappy and in pain. This determination to keep trying is an inner strength, even if it doesn't feel that way right now.\",\n    \"next_steps\": \"Let's explore together where you have managed similar challenges in the past or what has helped you keep moving forward, even in tough circumstances. You might have resources and strengths you've used before that could be supportive now.\"\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.6,\n        \"reason_not_selected\": \"Although the client is venting and expressing painful emotions, the central themes are self-blame, hopelessness, and stuckness. Resource-focused encouragement is more precisely matched because the goal is to validate and reframe, rather than to seek a deeper narrative exploration.\"\n      }\n    ]\n  }\n}\n```","target":"default","reasoning":"json_schema_validator: Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata | content_evaluator: All key criteria are met, including normalization of the client's experience, recognition of low self-efficacy, and empowerment via resource-focused reframing—matching both the criteria and reference_answer.","lm_provider_request":{"question":"Route the following client statement to the best framework.\n\nClient Statement:\n\"I sent many resumes with no response. I doubt myself—am I unable to do anything? I am in pain, unhappy every day, and don't know what to do.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>","guidelines":""},"evaluator_results":[{"name":"json_schema_validator","type":"code_judge","score":1,"weight":1,"verdict":"pass","hits":[],"misses":[],"reasoning":"Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata","evaluator_provider_request":{"script":["uv","run","validate_output.py"],"cwd":"/root/projects/agentv/examples/showcase/psychotherapy/evals"}},{"name":"content_evaluator","type":"llm_judge","score":1,"weight":1,"verdict":"pass","hits":["Correctly selects resource_focused_encouragement as framework","Rationale addresses self-blame, hopelessness, and stuckness","Primary indicators accurately identified and matched to routing logic","Framework output provides normalization, empowerment, and strength-based reframing"],"misses":[],"reasoning":"All key criteria are met, including normalization of the client's experience, recognition of low self-efficacy, and empowerment via resource-focused reframing—matching both the criteria and reference_answer.","evaluator_provider_request":{"user_prompt":"You are an expert evaluator. Your goal is to grade the candidate_answer based on how well it achieves the criteria for the original task.\n\nUse the reference_answer as a gold standard for a high-quality response (if provided). The reference_answer may be a simple text response, or it may contain a sequence of expected agent messages including tool calls. When it contains multiple messages, the last message represents the final expected answer. The candidate_answer does not need to match it verbatim, but should capture the key points and follow the same spirit.\n\nBe concise and focused in your evaluation. Provide succinct, specific feedback rather than verbose explanations.\n\n[[ ## criteria ## ]]\nMust select 'resource_focused_encouragement'.\nRationale should mention \"low self-efficacy\", \"empowerment\", or \"normalization of failure\".\n\n[[ ## question ## ]]\nRoute the following client statement to the best framework.\n\nClient Statement:\n\"I sent many resumes with no response. I doubt myself—am I unable to do anything? I am in pain, unhappy every day, and don't know what to do.\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>\n\n[[ ## reference_answer ## ]]\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is in a state of low self-worth and despair ('unable to do anything'). They require Normalization (job market is tough) and Resource identification (persistence) to rebuild self-efficacy.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Self-blame and hopelessness ('unable to do anything')\",\n      \"Expressing stuckness ('don't know what to do')\",\n      \"Hidden resource (persistence in sending resumes)\"\n    ],\n    \"contraindications\": [],\n    \"therapeutic_urgency\": \"elevated\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.35,\n        \"reason_not_selected\": \"Client needs empowerment and normalization more than deep understanding at this stage\"\n      }\n    ]\n  }\n}\n\n[[ ## candidate_answer ## ]]\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client expresses self-blame ('I doubt myself—am I unable to do anything?'), hopelessness ('in pain, unhappy every day, and don't know what to do'), and a sense of 'stuckness' after sending many resumes with no response. These indicators match the routing logic for resource_focused_encouragement, which is aimed at validating stuckness, reframing the struggle, and identifying hidden strengths.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Self-blame: 'I doubt myself—am I unable to do anything?'\",\n      \"Hopelessness: 'I am in pain, unhappy every day'\",\n      \"Stuckness: 'don't know what to do', 'sent many resumes with no response'\"\n    ],\n    \"contraindications\": [\n      \"No explicit expression of confusion or complexity needing 'three_levels_listening'\",\n      \"No statements of feeling unheard or misunderstood\"\n    ],\n    \"therapeutic_urgency\": \"elevated\"\n  },\n  \"framework_output\": {\n    \"validation\": \"It's genuinely difficult to put effort into job searching and receive no response. Many people in your position would feel discouraged or doubt themselves—these feelings make sense in this context.\",\n    \"reframing\": \"Your continued efforts in sending out resumes show persistence and resilience, even while you're feeling unhappy and in pain. This determination to keep trying is an inner strength, even if it doesn't feel that way right now.\",\n    \"next_steps\": \"Let's explore together where you have managed similar challenges in the past or what has helped you keep moving forward, even in tough circumstances. You might have resources and strengths you've used before that could be supportive now.\"\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.6,\n        \"reason_not_selected\": \"Although the client is venting and expressing painful emotions, the central themes are self-blame, hopelessness, and stuckness. Resource-focused encouragement is more precisely matched because the goal is to validate and reframe, rather than to seek a deeper narrative exploration.\"\n      }\n    ]\n  }\n}\n```","system_prompt":"You must respond with a single JSON object matching this schema:\n\n{\n  \"score\": <number between 0.0 and 1.0>,\n  \"hits\": [<array of strings, max 4 items, brief specific achievements>],\n  \"misses\": [<array of strings, max 4 items, brief specific failures or omissions, empty if none>],\n  \"reasoning\": \"<string, concise explanation for the score, 1-2 sentences max>\"\n}","target":"default"}}],"trace_summary":{"event_count":0,"tool_names":[],"tool_calls_by_name":{},"error_count":0}}
{"timestamp":"2026-01-03T12:08:57.434Z","eval_id":"route-to-listening-gatekeeper","dataset":"dataset-routing","score":0.5,"hits":["Accurately identifies exhaustion and self-blame in the client statement","Recognizes protective intent and endurance as possible strengths"],"misses":["Selects 'resource_focused_encouragement' instead of required 'three_levels_listening'","Fails to acknowledge dysfunctional dynamic or need to analyze the client's process","Contraindications incorrectly ruled out deep process-oriented frameworks"],"candidate_answer":"```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client describes a persistent struggle—mediating between wife and mom to protect them—and expresses exhaustion and confusion about why this 'good thing' drains them. The narrative implies self-blame ('why do I feel so exhausted...'), hidden strengths (endurance, care), and a behavior that is motivated by protective intent but takes a toll. According to the routing logic, this pattern fits resource-focused encouragement: validating the effort, exploring underlying strengths, and reframing the exhaustion as a signal of limits rather than failure.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Expresses emotional exhaustion after doing something perceived as good\",\n      \"Describes an ongoing struggle managing family relationships\",\n      \"Implicit self-blame: feels something is wrong despite positive intent\",\n      \"Protective behavior for family members\"\n    ],\n    \"contraindications\": [\n      \"No direct or complex conflict narrative requiring deep emotional/process analysis (contra three_levels_listening)\",\n      \"No explicit crisis or urgent risk signals\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {\n    \"resource_highlighting\": [\n      \"You are actively working to protect your loved ones from emotional distress—this reveals a strong sense of care and loyalty.\",\n      \"Managing two relationships while translating intent shows emotional intelligence and an ability to navigate complex social dynamics.\"\n    ],\n    \"strength_validation\": [\n      \"It's understandable to feel exhausted because balancing and absorbing the emotions of others is challenging—it requires energy and resilience.\",\n      \"Your exhaustion doesn't mean you're failing; rather, it's a sign that you're investing significant personal resources in maintaining family harmony.\"\n    ],\n    \"positive_reframe\": [\n      \"The fact that you are aware of your exhaustion means you are in touch with your needs. Noticing this is important—it gives you information about your limits and when you might need to ask for support.\",\n      \"Doing a 'good thing' does not mean it's easy or that you must do it alone. Your commitment is admirable, and it's healthy to acknowledge the toll it can take.\"\n    ],\n    \"gentle_prompt\": [\n      \"What would it look like to give yourself a break, or to ask for help in these moments?\",\n      \"If you imagined offering yourself the same care you give your family, what might change for you?\"\n    ]\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.4,\n        \"reason_not_selected\": \"While the client alludes to complex relationship dynamics, the core issue described—exhaustion and confusion around a protective behavior—is more about validating strengths and reframing self-blame than unpacking narrative process or deep emotional undercurrents.\"\n      }\n    ]\n  }\n}\n```","target":"default","reasoning":"json_schema_validator: Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata | content_evaluator: The response misroutes to resource-focused encouragement, overlooking the need to analyze dysfunctional triangulation dynamics and the lack of insight, leading to a framework choice that could reinforce the maladaptive pattern rather than address it as required.","lm_provider_request":{"question":"Route the following client statement to the best framework.\n\nClient Statement:\n\"I translate for my wife and mom so they don't get hurt. I tell my wife Mom is just worried, and I tell Mom my wife is just tired. Why do I feel so exhausted if I'm doing such a good thing?\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>","guidelines":""},"evaluator_results":[{"name":"json_schema_validator","type":"code_judge","score":1,"weight":1,"verdict":"pass","hits":[],"misses":[],"reasoning":"Valid JSON with all required keys: routing_decision, client_statement_analysis, framework_output, metadata","evaluator_provider_request":{"script":["uv","run","validate_output.py"],"cwd":"/root/projects/agentv/examples/showcase/psychotherapy/evals"}},{"name":"content_evaluator","type":"llm_judge","score":0,"weight":1,"verdict":"fail","hits":["Accurately identifies exhaustion and self-blame in the client statement","Recognizes protective intent and endurance as possible strengths"],"misses":["Selects 'resource_focused_encouragement' instead of required 'three_levels_listening'","Fails to acknowledge dysfunctional dynamic or need to analyze the client's process","Contraindications incorrectly ruled out deep process-oriented frameworks"],"reasoning":"The response misroutes to resource-focused encouragement, overlooking the need to analyze dysfunctional triangulation dynamics and the lack of insight, leading to a framework choice that could reinforce the maladaptive pattern rather than address it as required.","evaluator_provider_request":{"user_prompt":"You are an expert evaluator. Your goal is to grade the candidate_answer based on how well it achieves the criteria for the original task.\n\nUse the reference_answer as a gold standard for a high-quality response (if provided). The reference_answer may be a simple text response, or it may contain a sequence of expected agent messages including tool calls. When it contains multiple messages, the last message represents the final expected answer. The candidate_answer does not need to match it verbatim, but should capture the key points and follow the same spirit.\n\nBe concise and focused in your evaluation. Provide succinct, specific feedback rather than verbose explanations.\n\n[[ ## criteria ## ]]\nMust select 'three_levels_listening'.\nRationale should mention \"dysfunctional dynamic\", \"lack of insight\", or \"need to analyze the process\". Encouragement here would likely reinforce the triangulation.\n\n[[ ## question ## ]]\nRoute the following client statement to the best framework.\n\nClient Statement:\n\"I translate for my wife and mom so they don't get hurt. I tell my wife Mom is just worried, and I tell Mom my wife is just tired. Why do I feel so exhausted if I'm doing such a good thing?\"\n\n<file path=\"../skills/routing.md\">\n---\ndescription: 'Analyze client statements and route to the most effective therapeutic framework'\n---\n\n# Psychology Framework Router\n\nYou are a Senior Psychology Supervisor AI specializing in therapeutic framework selection.\n\n## Task\nAnalyze a raw client statement and route it to the most effective therapeutic framework for processing.\n\n## Input\nA string containing a client's verbal statement or description of a situation.\n\n## Routing Logic\n\n### Route to `three_levels_listening` when:\n- Client is venting, confused, or expressing complex grievances\n- Client feels unheard or misunderstood\n- Goal is to deeply understand narrative, feelings, and underlying psychological dynamics (Content, Emotion, Process)\n\n### Route to `resource_focused_encouragement` when:\n- Client expresses self-blame, hopelessness, or \"stuckness\"\n- Client describes a struggle they are enduring (implies hidden strength)\n- Client reports a behavior they dislike but which may have a positive protective intent\n- Goal is to shift perspective from \"Deficit\" to \"Resource\" using validation and reframing\n\n## Processing Flow\n\n1. **Analyze** the client statement using routing logic\n2. **Select** the appropriate framework\n3. **Invoke** the selected framework with the client statement\n4. **Embed** the framework's output in the `framework_output` field\n5. **Return** the complete routing response\n\n## Output Schema\n\nReturn valid JSON with the following structure:\n\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening | resource_focused_encouragement\",\n    \"confidence\": \"high | medium | low\",\n    \"rationale\": \"Explain why this framework was selected based on the client's statement and the routing logic above.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"List of key phrases or patterns that triggered this routing decision\"\n    ],\n    \"contraindications\": [\n      \"List of any indicators that suggested alternative frameworks (if applicable)\"\n    ],\n    \"therapeutic_urgency\": \"routine | elevated | crisis\"\n  },\n  \"framework_output\": {\n    // Invoke the selected framework and embed its output here\n    // The structure depends on which framework was selected:\n    // - three_levels_listening: See listening.md output schema\n    // - resource_focused_encouragement: See encouragement.md output schema\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"string\",\n        \"score\": 0.0-1.0,\n        \"reason_not_selected\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n### Output Format Notes\n\n- If the selected framework file is not found or cannot be accessed, leave `framework_output` as an empty object: `{}`\n- If the query only asks which framework to use (without requesting the framework's output), leave `framework_output` as an empty object: `{}`\n- Only populate `framework_output` when both the framework is accessible AND a full therapeutic response is requested\n\n---\n\n**Note:** For a detailed example output, see [routing-example.md](./references/routing-example.md)\n</file>\n\n[[ ## reference_answer ## ]]\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"three_levels_listening\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client is engaging in 'Triangulation' (blocking direct communication) but frames it as 'doing a good thing'. Encouraging this would reinforce the pathology. Listening/Process analysis is needed to help him see the cost of his gatekeeping role.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Dysfunctional dynamic (triangulation)\",\n      \"Lack of insight ('doing a good thing')\",\n      \"Confusion about exhaustion despite 'good intentions'\"\n    ],\n    \"contraindications\": [\n      \"Resource-focused encouragement would reinforce the pathological pattern\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {},\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"resource_focused_encouragement\",\n        \"score\": 0.2,\n        \"reason_not_selected\": \"Encouraging the 'translation' behavior would enable and reinforce the triangulation dynamic\"\n      }\n    ]\n  }\n}\n\n[[ ## candidate_answer ## ]]\n```json\n{\n  \"routing_decision\": {\n    \"selected_framework\": \"resource_focused_encouragement\",\n    \"confidence\": \"high\",\n    \"rationale\": \"The client describes a persistent struggle—mediating between wife and mom to protect them—and expresses exhaustion and confusion about why this 'good thing' drains them. The narrative implies self-blame ('why do I feel so exhausted...'), hidden strengths (endurance, care), and a behavior that is motivated by protective intent but takes a toll. According to the routing logic, this pattern fits resource-focused encouragement: validating the effort, exploring underlying strengths, and reframing the exhaustion as a signal of limits rather than failure.\"\n  },\n  \"client_statement_analysis\": {\n    \"primary_indicators\": [\n      \"Expresses emotional exhaustion after doing something perceived as good\",\n      \"Describes an ongoing struggle managing family relationships\",\n      \"Implicit self-blame: feels something is wrong despite positive intent\",\n      \"Protective behavior for family members\"\n    ],\n    \"contraindications\": [\n      \"No direct or complex conflict narrative requiring deep emotional/process analysis (contra three_levels_listening)\",\n      \"No explicit crisis or urgent risk signals\"\n    ],\n    \"therapeutic_urgency\": \"routine\"\n  },\n  \"framework_output\": {\n    \"resource_highlighting\": [\n      \"You are actively working to protect your loved ones from emotional distress—this reveals a strong sense of care and loyalty.\",\n      \"Managing two relationships while translating intent shows emotional intelligence and an ability to navigate complex social dynamics.\"\n    ],\n    \"strength_validation\": [\n      \"It's understandable to feel exhausted because balancing and absorbing the emotions of others is challenging—it requires energy and resilience.\",\n      \"Your exhaustion doesn't mean you're failing; rather, it's a sign that you're investing significant personal resources in maintaining family harmony.\"\n    ],\n    \"positive_reframe\": [\n      \"The fact that you are aware of your exhaustion means you are in touch with your needs. Noticing this is important—it gives you information about your limits and when you might need to ask for support.\",\n      \"Doing a 'good thing' does not mean it's easy or that you must do it alone. Your commitment is admirable, and it's healthy to acknowledge the toll it can take.\"\n    ],\n    \"gentle_prompt\": [\n      \"What would it look like to give yourself a break, or to ask for help in these moments?\",\n      \"If you imagined offering yourself the same care you give your family, what might change for you?\"\n    ]\n  },\n  \"metadata\": {\n    \"alternative_frameworks_considered\": [\n      {\n        \"framework\": \"three_levels_listening\",\n        \"score\": 0.4,\n        \"reason_not_selected\": \"While the client alludes to complex relationship dynamics, the core issue described—exhaustion and confusion around a protective behavior—is more about validating strengths and reframing self-blame than unpacking narrative process or deep emotional undercurrents.\"\n      }\n    ]\n  }\n}\n```","system_prompt":"You must respond with a single JSON object matching this schema:\n\n{\n  \"score\": <number between 0.0 and 1.0>,\n  \"hits\": [<array of strings, max 4 items, brief specific achievements>],\n  \"misses\": [<array of strings, max 4 items, brief specific failures or omissions, empty if none>],\n  \"reasoning\": \"<string, concise explanation for the score, 1-2 sentences max>\"\n}","target":"default"}}],"trace_summary":{"event_count":0,"tool_names":[],"tool_calls_by_name":{},"error_count":0}}
