# AgentV Static Trace File Demo
# Demonstrates how to evaluate a pre-existing static trace file.
#
# This is useful when you have captured traces from production or other systems
# and want to run AgentV evaluators against them offline.
#
# Setup:
#   1. Create examples/features/.env with:
#      TOOL_TRAJECTORY_DIR=/absolute/path/to/examples/features/evals/tool-trajectory
#   2. Run: cd examples/features && npx agentv eval evals/tool-trajectory/trace-file-demo.yaml --target static_trace

$schema: agentv-eval-v2
description: Static trace file evaluation demo

# Use static_trace target that reads from a file
target: static_trace

evalcases:
  # ==========================================
  # Example 1: Validate static trace (Tool Trajectory)
  # Use case: Ensure the captured trace meets requirements
  # The static trace contains webSearch and readFile calls
  # Expected score: 1.0
  # ==========================================
  - id: validate-static-trace
    expected_outcome: |-
      Agent performs web search and reads file.

    # Input messages are ignored by the static trace provider but required by schema
    input_messages:
      - role: user
        content: Analyze the trace.

    execution:
      evaluators:
        - name: trace-validator
          type: tool_trajectory
          mode: in_order
          expected:
            - tool: webSearch
            - tool: readFile

  # ==========================================
  # Example 2: All-in-One Validation
  # Use case: Combine tool_trajectory and expected_tool_calls for comprehensive validation
  # Validates:
  #   1. Exact tool inputs (via expected_tool_calls)
  #   2. High-level sequence (via tool_trajectory)
  # Expected score: 1.0
  # ==========================================
  - id: all-in-one-validation
    expected_outcome: |-
      Agent performs web search with correct query and reads the correct file.

    input_messages:
      - role: user
        content: Analyze the trace.

    # Validate exact inputs
    expected_messages:
      - role: assistant
        content: I have completed the research.
        tool_calls:
          - tool: webSearch
            input: { query: "AgentV documentation" }
          - tool: readFile
            input: { path: "README.md" }

    execution:
      evaluators:
        # Validate inputs match exactly
        - name: input-validator
          type: expected_tool_calls
        
        # Validate sequence (redundant but demonstrates combination)
        - name: sequence-validator
          type: tool_trajectory
          mode: exact
          expected:
            - tool: webSearch
            - tool: readFile
