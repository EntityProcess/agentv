$schema: agentv-targets-v2.2

targets:
  - name: batch_cli
    provider: cli
    provider_batching: true

    verbose: true

    # Runs once for the whole panel.
    # The runner reads ./AmlScreeningInput.csv and writes JSONL to {OUTPUT_FILE}.
    # NOTE: Do not add quotes around {OUTPUT_FILE}; it is already shell-escaped.
    command_template: bun run ./scripts/batch-cli-runner.ts --eval ./batch-cli-demo.yaml --csv ./AmlScreeningInput.csv --output {OUTPUT_FILE}

    timeout_seconds: 30

    healthcheck:
      type: command
      command_template: bun run ./scripts/batch-cli-runner.ts --healthcheck
